<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Redirection vers lâ€™application PraticBoutic</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- EmpÃªcher la mise en cache -->
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>

    <script type="text/javascript">
        function buildDeepLink() {
          const qs = window.location.search || '';
          return "praticboutic://onboarding-complete" + qs;
        }

        function openApp() {
          try {
            window.location.replace(buildDeepLink());
          } catch (e) {
            window.location.href = buildDeepLink();
          }
        }

        window.onload = function () {
          // Lance la redirection vers l'app
          openApp();

          // Fallback au bout de 3,5s
          const fallbackTimer = setTimeout(function () {
            const msg = document.getElementById("message");
            if (msg) {
              msg.innerText =
                "Si lâ€™application ne sâ€™ouvre pas automatiquement, appuyez sur le bouton ci-dessous pour continuer.";
            }
            const btn = document.getElementById("openButton");
            if (btn) btn.style.display = "inline-block";

            // ðŸ‘‰ DÃ©commente si tu veux renvoyer vers lâ€™App Store automatiquement
            // window.location.href = "https://apps.apple.com/app/idVOTRE_APP_ID";
          }, 3500);

          // Si l'app a pris la main (Safari devient cachÃ©), annuler le fallback
          document.addEventListener("visibilitychange", function () {
            if (document.hidden) {
              clearTimeout(fallbackTimer);
            }
          });
        };
    </script>

    <style>
        body {
          margin: 0;
          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
          background-color: #f9f9f9;
          display: flex;
          align-items: center;
          justify-content: center;
          height: 100vh;
          text-align: center;
        }
        .container {
          padding: 20px;
          max-width: 520px;
        }
        h2 {
          color: #333;
          margin-bottom: 12px;
        }
        p {
          color: #555;
          font-size: 16px;
        }
        .btn {
          display: none;
          margin-top: 20px;
          padding: 12px 20px;
          background: #0a84ff;
          color: #fff;
          border-radius: 10px;
          text-decoration: none;
          font-weight: 600;
          font-size: 16px;
          box-shadow: 0 3px 6px rgba(0,0,0,0.15);
          transition: background 0.2s ease;
        }
        .btn:hover {
          background: #006be6;
        }
    </style>
</head>
<body>
<div class="container">
    <h2>Finalisation de lâ€™inscription</h2>
    <p id="message">Redirection en cours vers lâ€™application PraticBoutic...</p>
    <a id="openButton" class="btn" href="javascript:void(0)" onclick="openApp()">Ouvrir lâ€™application</a>
</div>
</body>
</html>
